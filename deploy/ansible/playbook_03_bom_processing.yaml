# /*----------------------------------------------------------------------------8
# |                                                                             |
# |                         PLAYBOOK FOR BOM PROCESSING                         |
# |                                                                             |
# +-------------------------------------4--------------------------------------*/
---

- hosts:        "{{ sap_sid|upper }}_SCS"
  name:         BOM Processing
  remote_user:  azureadm                              # TODO: Replace with variable
  become:       yes
  become_user:  root
  gather_facts: true
  vars_files:
    - vars/ansible-input-api.yaml                     # DONE: move this back into Repo Structure as an API template


#---------------------------
#  BEGIN: Centiq
#---------------------------

# - hosts: scs
#   become: yes
#   vars:
#     tier: preparation
#   vars_files:
#     - "{{ inventory_dir }}/sap-system-config.yaml"
#   roles:
#     - role: dependencies-install                    # --> roles-sap/sap-packages        (playbook_02_os_sap_specific_config)
#     - role: disk-setup                              # --> roles-sap/sap-disk-setup      (playbook_02_os_sap_specific_config)
#     - role: swap-setup                              # --> roles-os/os-swap              (playbook_01_os_base_config)
#     - role: ensure-bom                              # --> roles-sap/bom-fetch
#     - role: process_bom                             # --> roles-sap/bom-processing
#     - role: sap-users                               # --> roles-sap/sap-users           (playbook_02_os_sap_specific_config)
#     - role: nfs-server-setup                        # --> roles-sap-os/nfs-server-setup

#---------------------------
#  END  : Centiq
#---------------------------


  tasks:

  - set_fact:
      tier:     preparation

  - include_role:
      name:     roles-sap-os/sap-exports                        # TODO: Centiq copy (rework needed)

  - include_role:
      name:     roles-sap/bom-fetch                             # TODO: Centiq copy (rework needed)

  - include_role:
      name:     roles-sap/bom-processing                        # TODO: Centiq copy (rework needed)




#---------------------------
#  BEGIN: EXAMPLE
#---------------------------

# - hosts:        "{{ sapSid|lower }}scs00"
#   name:         test
#   remote_user:  ansible
#   become:       yes
#   become_user:  root
#   gather_facts: true
#   vars_files:
#     - vars/default.yaml


#   tasks:

#   - set_fact:
#       tier:     preparation

#   - include_role:
#       name: roles-sap/sapLvmSetup

#   - include_role:
#       name: roles-sap/sapMounts

#   - include_role:
#       name: roles-sap/sapPackages

#   - include_role:
#       name: roles-sap/sapExports

#   - include_role:
#       name: roles-sap/sapBom

#---------------------------
#  END  : EXAMPLE
#---------------------------


...
# /*----------------------------------------------------------------------------8
# |                                    END                                      |
# +-------------------------------------4--------------------------------------*/
